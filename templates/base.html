<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
   
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Ez ðŸ’š {% endblock %} EasySchedule - Book appointments with ease</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Telegram Web SDK -->
    <script async src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <style>
        /* Base Styles - Telegram Theme */
:root {
  /* Telegram color palette */
  --primary-color: #5288c1;     /* Telegram blue */
  --primary-dark: #497cb1;      /* Darker blue for hover states */
  --primary-light: #e7f3ff;     /* Light blue for backgrounds */
  
  --secondary-color: #ffffff;   /* White for cards and content areas */
  --secondary-dark: #f0f0f0;    /* Light gray for borders and dividers */
  --secondary-light: #ffffff;   /* Pure white for highlights */
  
  --dark-color: #212121;        /* Nearly black for primary text */
  --light-color: #f5f5f5;       /* Very light gray for backgrounds */
  
  --gray-color: #8e8e93;        /* Medium gray for secondary text */
  --light-gray: #d1d1d6;        /* Light gray for disabled elements */
  
  --danger-color: #ff3b30;      /* Red for errors and important actions */
  --warning-color: #ff9500;     /* Orange for warnings */
  --success-color: #34c759;     /* Green for success messages */
  
  /* Telegram-specific UI properties */
  --border-radius: 0.75rem;     /* Rounded corners for cards and buttons */
  --box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); /* Subtle shadow for cards */
  --transition: all 0.2s ease;   /* Smooth transitions */
  
  /* Spacing variables for consistent layout */
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 1rem;
  --spacing-lg: 1.5rem;
  --spacing-xl: 2rem;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  line-height: 1.5;
  color: var(--dark-color);
  background-color: var(--light-color);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  padding-bottom: env(safe-area-inset-bottom); /* For iOS devices */
}

a {
  text-decoration: none;
  color: var(--primary-color);
  transition: var(--transition);
}

a:hover {
  color: var(--primary-dark);
}

/* Container and Layout */
.container {
  width: 100%;
  max-width: 100%;
  padding: 0 var(--spacing-md);
  margin: 0 auto;
}

.section {
  padding: var(--spacing-lg) 0;
}

/* Header Styles */
.header {
  background-color: var(--secondary-color);
  box-shadow: var(--box-shadow);
  position: sticky;
  top: 0;
  z-index: 100;
  padding: var(--spacing-md);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.header-title {
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--primary-color);
}

/* Card Styles - Telegram-like cards */
.card {
  background-color: var(--secondary-color);
  border-radius: var(--border-radius);
  box-shadow: var(--box-shadow);
  padding: var(--spacing-lg);
  margin-bottom: var(--spacing-md);
  transition: var(--transition);
}

.card:hover {
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

/* Button Styles */
.btn {
  display: inline-block;
  background-color: var(--primary-color);
  color: white;
  border: none;
  border-radius: var(--border-radius);
  padding: var(--spacing-sm) var(--spacing-lg);
  font-size: 1rem;
  font-weight: 500;
  cursor: pointer;
  transition: var(--transition);
  text-align: center;
}

.btn:hover {
  background-color: var(--primary-dark);
}

.btn-secondary {
  background-color: var(--secondary-dark);
  color: var(--dark-color);
}

.btn-secondary:hover {
  background-color: #e0e0e0;
}

.btn-danger {
  background-color: var(--danger-color);
}

.btn-danger:hover {
  background-color: #e0352b;
}

.btn-success {
  background-color: var(--success-color);
}

.btn-success:hover {
  background-color: #2eb350;
}

.btn-block {
  display: block;
  width: 100%;
}

/* Form Styles */
.form-group {
  margin-bottom: var(--spacing-md);
}

.form-label {
  display: block;
  margin-bottom: var(--spacing-xs);
  font-weight: 500;
}

.form-control {
  width: 100%;
  padding: var(--spacing-sm) var(--spacing-md);
  border: 1px solid var(--light-gray);
  border-radius: var(--border-radius);
  font-size: 1rem;
  transition: var(--transition);
}

.form-control:focus {
  border-color: var(--primary-color);
  outline: none;
  box-shadow: 0 0 0 2px rgba(82, 136, 193, 0.2);
}

/* List Styles */
.list {
  list-style: none;
}

.list-item {
  padding: var(--spacing-md);
  border-bottom: 1px solid var(--secondary-dark);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.list-item:last-child {
  border-bottom: none;
}

/* Appointment Styles */
.appointment-card {
  border-left: 4px solid var(--primary-color);
}

.appointment-time {
  font-weight: 600;
  color: var(--primary-color);
}

.appointment-details {
  margin-top: var(--spacing-sm);
  color: var(--gray-color);
}

/* Map Modal Styles */
.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
  opacity: 0;
  visibility: hidden;
  transition: var(--transition);
}

.modal.active {
  opacity: 1;
  visibility: visible;
}

.modal-content {
  background-color: var(--secondary-color);
  border-radius: var(--border-radius);
  width: 90%;
  max-width: 500px;
  max-height: 80vh;
  overflow-y: auto;
  padding: var(--spacing-lg);
  position: relative;
}

.modal-close {
  position: absolute;
  top: var(--spacing-md);
  right: var(--spacing-md);
  background: none;
  border: none;
  font-size: 1.5rem;
  cursor: pointer;
  color: var(--gray-color);
}

.map-container {
  width: 100%;
  height: 300px;
  border-radius: var(--border-radius);
  overflow: hidden;
  margin-top: var(--spacing-md);
}

/* Utility Classes */
.text-center {
  text-align: center;
}

.text-primary {
  color: var(--primary-color);
}

.text-danger {
  color: var(--danger-color);
}

.text-success {
  color: var(--success-color);
}

.mt-1 { margin-top: var(--spacing-xs); }
.mt-2 { margin-top: var(--spacing-sm); }
.mt-3 { margin-top: var(--spacing-md); }
.mt-4 { margin-top: var(--spacing-lg); }
.mt-5 { margin-top: var(--spacing-xl); }

.mb-1 { margin-bottom: var(--spacing-xs); }
.mb-2 { margin-bottom: var(--spacing-sm); }
.mb-3 { margin-bottom: var(--spacing-md); }
.mb-4 { margin-bottom: var(--spacing-lg); }
.mb-5 { margin-bottom: var(--spacing-xl); }

/* Responsive Styles */
@media (max-width: 768px) {
  .container {
    padding: 0 var(--spacing-sm);
  }
  
  .card {
    padding: var(--spacing-md);
  }
  
  .header {
    padding: var(--spacing-sm) var(--spacing-md);
  }
  
  .modal-content {
    width: 95%;
    padding: var(--spacing-md);
  }
}

/* Telegram Mini App specific styles */
.tg-app {
  max-width: 100%;
  overflow-x: hidden;
}

/* Bottom navigation for mobile */
.bottom-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background-color: var(--secondary-color);
  display: flex;
  justify-content: space-around;
  padding: var(--spacing-sm) 0;
  box-shadow: 0 -1px 4px rgba(0, 0, 0, 0.1);
  z-index: 90;
}

.bottom-nav-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: var(--spacing-xs) var(--spacing-sm);
  color: var(--gray-color);
  transition: var(--transition);
}

.bottom-nav-item.active {
  color: var(--primary-color);
}

.bottom-nav-icon {
  font-size: 1.5rem;
  margin-bottom: var(--spacing-xs);
}

.bottom-nav-text {
  font-size: 0.75rem;
}

/* Main content area with padding for bottom nav */
.main-content {
  padding-bottom: 60px; /* Height of bottom nav */
}

/* Floating action button (common in Telegram) */
.fab {
  position: fixed;
  bottom: 70px; /* Above bottom nav */
  right: var(--spacing-md);
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background-color: var(--primary-color);
  color: white;
  display: flex;
  justify-content: center;
  align-items: center;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
  z-index: 80;
  transition: var(--transition);
}

.fab:hover {
  background-color: var(--primary-dark);
  transform: scale(1.05);
}

/* Telegram-style list items with chevron */
.tg-list-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-md);
  border-bottom: 1px solid var(--secondary-dark);
  background-color: var(--secondary-color);
  transition: var(--transition);
}

.tg-list-item:active {
  background-color: var(--secondary-dark);
}

.tg-list-content {
  display: flex;
  flex-direction: column;
}

.tg-list-title {
  font-weight: 500;
  margin-bottom: var(--spacing-xs);
}

.tg-list-subtitle {
  font-size: 0.875rem;
  color: var(--gray-color);
}

.tg-list-chevron {
  color: var(--light-gray);
}

/* Loading indicator (spinner) */
.loading-spinner {
  display: inline-block;
  width: 30px;
  height: 30px;
  border: 3px solid rgba(82, 136, 193, 0.3);
  border-radius: 50%;
  border-top-color: var(--primary-color);
  animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Telegram-style search bar */
.search-bar {
  background-color: var(--secondary-dark);
  border-radius: 20px;
  padding: var(--spacing-xs) var(--spacing-md);
  display: flex;
  align-items: center;
  margin: var(--spacing-md) 0;
}

.search-icon {
  color: var(--gray-color);
  margin-right: var(--spacing-xs);
}

.search-input {
  background: transparent;
  border: none;
  flex: 1;
  padding: var(--spacing-xs) 0;
  color: var(--dark-color);
}

.search-input:focus {
  outline: none;
}

/* Appointment calendar styles */
.calendar {
  background-color: var(--secondary-color);
  border-radius: var(--border-radius);
  overflow: hidden;
  box-shadow: var(--box-shadow);
}

.calendar-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-md);
  background-color: var(--primary-light);
}

.calendar-title {
  font-weight: 600;
  color: var(--primary-color);
}

.calendar-nav {
  display: flex;
  gap: var(--spacing-sm);
}

.calendar-nav-btn {
  background: none;
  border: none;
  color: var(--primary-color);
  cursor: pointer;
  padding: var(--spacing-xs);
}

.calendar-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 1px;
  background-color: var(--secondary-dark);
}

.calendar-day {
  background-color: var(--secondary-color);
  padding: var(--spacing-sm);
  text-align: center;
  cursor: pointer;
  transition: var(--transition);
}

.calendar-day:hover {
  background-color: var(--primary-light);
}

.calendar-day.active {
  background-color: var(--primary-color);
  color: white;
}

.calendar-day.disabled {
  color: var(--light-gray);
  cursor: not-allowed;
}

/* Time slot selection */
.time-slots {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--spacing-sm);
  margin-top: var(--spacing-md);
}

.time-slot {
  background-color: var(--secondary-color);
  border: 1px solid var(--secondary-dark);
  border-radius: var(--border-radius);
  padding: var(--spacing-sm);
  text-align: center;
  cursor: pointer;
  transition: var(--transition);
}

.time-slot:hover {
  border-color: var(--primary-color);
}

.time-slot.active {
  background-color: var(--primary-color);
  color: white;
  border-color: var(--primary-color);
}

.time-slot.disabled {
  color: var(--light-gray);
  cursor: not-allowed;
}
    </style>
    {% block extra_css %}{% endblock %}
</head>
<body>
    {% block header %}
    <header>
        <div class="container">
            <div class="logo">
                <a href="/">
                    <i class="fas fa-calendar-check"></i>
                    <span>EasySchedule</span>
                </a>
            </div>
            <nav>
                <ul>
                    <li><a href="/" class="active">Home</a></li>
                    <li><a href="/businesses">Businesses</a></li>
                    <li><a href="#">About</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </nav>
            <div class="mobile-menu-btn">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </header>
    {% endblock %}
    <main>
        {% block content %}{% endblock %}
    </main>

    {% block footer %}
    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <div class="logo">
                        <i class="fas fa-calendar-check"></i>
                        <span>EasySchedule</span>
                    </div>
                    <p>Making appointment booking simple and efficient for everyone.</p>
                </div>
                <div class="footer-col">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="/">Home</a></li>
                        <li><a href="{% url 'business_list' %}">Businesses</a></li>
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Categories</h4>
                    <ul>
                        <li><a href="{% url 'business_list' %}?category=health">Health & Medical</a></li>
                        <li><a href="{% url 'business_list' %}?category=personal care">Beauty & Spa</a></li>
                        <li><a href="{% url 'business_list' %}?category=fitness">Fitness</a></li>
                        <li><a href="{% url 'business_list' %}?category=professional">Professional Services</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Connect With Us</h4>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 EasySchedule. All rights reserved.</p>
            </div>
        </div>
    </footer>
    {% endblock %}
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            if (window.Telegram) {
                // Telegram SDK is available, proceed with your logic
                const tg = window.Telegram.WebApp;
                
                tg.ready(); // Signal Telegram that your web app is ready
                applyTheme(); // Apply the theme on initial load
        
                // Listen for theme changes (like switching between light/dark mode)
                tg.onEvent('themeChanged', function() {
                    applyTheme(); // Reapply the theme whenever it changes
                });
        
                function applyTheme() {
                    const theme = tg.themeParams || {};
                    // Ensure that the theme values are available
                    const bgColor = theme.bg_color || '#ffffff'; // Default to white if undefined
                    const textColor = theme.text_color || '#000000'; // Default to black if undefined
                    const cardBgColor = theme.secondary_bg_color || '#f0f0f0'; // Default light color
                    const cardHoverColor = theme.button_color || '#8eaffd'; // Default blue color
                    const shadowColor = theme.shadow_color || 'rgba(0, 0, 0, 0.1)'; // Default shadow
                
                    // Apply theme colors using CSS variables
                    document.documentElement.style.setProperty('--bg-color', bgColor);
                    document.documentElement.style.setProperty('--text-color', textColor);
                    document.documentElement.style.setProperty('--card-bg-color', cardBgColor);
                    document.documentElement.style.setProperty('--card-hover-bg-color', cardHoverColor);
                    document.documentElement.style.setProperty('--box-shadow', `0 2px 5px ${shadowColor}`);
                    document.documentElement.style.setProperty('--box-shadow-hover', `0 4px 10px ${shadowColor}`);
                }
            } else {
                console.error("Telegram Web SDK is not loaded properly.");
            }
        });
        
    </script>
    <script>
        // Mobile Menu Toggle
        document.addEventListener("DOMContentLoaded", () => {
            const mobileMenuBtn = document.querySelector(".mobile-menu-btn")
            const nav = document.querySelector("nav")
        
            if (mobileMenuBtn) {
            mobileMenuBtn.addEventListener("click", function () {
                nav.classList.toggle("active")
        
                // Toggle icon
                const icon = this.querySelector("i")
                if (icon.classList.contains("fa-bars")) {
                icon.classList.remove("fa-bars")
                icon.classList.add("fa-times")
                } else {
                icon.classList.remove("fa-times")
                icon.classList.add("fa-bars")
                }
            })
            }
        
            // Close mobile menu when clicking outside
            document.addEventListener("click", (event) => {
            if (
                nav &&
                nav.classList.contains("active") &&
                !nav.contains(event.target) &&
                !mobileMenuBtn.contains(event.target)
            ) {
                nav.classList.remove("active")
                const icon = mobileMenuBtn.querySelector("i")
                icon.classList.remove("fa-times")
                icon.classList.add("fa-bars")
            }
            })
        
            // Tab functionality
            const tabBtns = document.querySelectorAll(".tab-btn")
            const tabContents = document.querySelectorAll(".tab-content")
        
            if (tabBtns.length > 0) {
            tabBtns.forEach((btn) => {
                btn.addEventListener("click", function () {
                // Remove active class from all buttons and contents
                tabBtns.forEach((btn) => btn.classList.remove("active"))
                tabContents.forEach((content) => content.classList.remove("active"))
        
                // Add active class to clicked button and corresponding content
                this.classList.add("active")
                const tabId = this.getAttribute("data-tab")
                document.getElementById(tabId).classList.add("active")
                })
            })
            }
        
            // Format currency
            window.formatCurrency = (amount) =>
            new Intl.NumberFormat("en-US", {
                style: "currency",
                currency: "USD",
            }).format(amount)
        
            // Format date
            window.formatDate = (dateString) => {
            const options = { year: "numeric", month: "long", day: "numeric" }
            return new Date(dateString).toLocaleDateString("en-US", options)
            }
        
            // Format time
            window.formatTime = (timeString) => {
            const options = { hour: "numeric", minute: "2-digit", hour12: true }
            return new Date(`2000-01-01T${timeString}`).toLocaleTimeString("en-US", options)
            }
        
            // Generate star rating HTML
            window.generateStarRating = (rating) => {
            let starsHtml = ""
            const fullStars = Math.floor(rating)
            const halfStar = rating % 1 >= 0.5
            const emptyStars = 5 - fullStars - (halfStar ? 1 : 0)
        
            for (let i = 0; i < fullStars; i++) {
                starsHtml += '<i class="fas fa-star"></i>'
            }
        
            if (halfStar) {
                starsHtml += '<i class="fas fa-star-half-alt"></i>'
            }
        
            for (let i = 0; i < emptyStars; i++) {
                starsHtml += '<i class="far fa-star"></i>'
            }
        
            return starsHtml
            }
        
            // API base URL
            window.apiBaseUrl = "https://ezgo-ekrp.onrender.com/go/api/"
        })
  
  
    </script>
    
    <!-- Telegram Login Widget -->
    {% comment %} <script async src="https://telegram.org/js/telegram-widget.js?7"
    data-telegram-login="appraisal101_bot" data-size="large" data-radius="10"
    data-request-access="write"></script> {% endcomment %}

    {% block extra_js %}{% endblock %}
</body>
</html>
